# Building Secure Microservices-based Applications Using Service-Mesh Architecture和訳

個人的な勉強のため，NIST SP 800-204a "Building Secure Microservices-based Applications Using Service-Mesh Architecture" を和訳していきます。

原文は[こちら](https://csrc.nist.gov/publications/detail/sp/800-204a/final)です。

なるべく原文に沿って翻訳しますが，内容の正確性を保証するものではございません。  
また，権限などに問題があると判明した場合，本リポジトリは削除される可能性があります。

なお，翻訳にあたり，[DEEPL](https://www.deepl.com/home)や[Google Translate](https://translate.google.co.jp/)を活用させていただいております。

## NIST SP 800 とは

TODO

以下本文

---

NIST Special Publication 800-204A

## サービスメッシュアーキテクチャを用いたセキュアなマイクロサービス型アプリケーションの構築

Building Secure Microservices-based Applications Using Service-Mesh Architecture

Ramaswamy Chandramouli, Zack Butcher著

https://doi.org/10.6028/NIST.SP.800-204A

2020年5月

## 要旨

マイクロサービス型アプリケーションを構築する傾向の高まりにより、そのユニークな特徴から、サービス間の相互作用のあらゆる側面でセキュリティに対処することが求められている。マイクロサービスの分散したクロスドメインの性質から、セキュアトークンサービス（STS）、認証・認可のための鍵管理や暗号化サービス、セキュアな通信プロトコルが必要である。（マイクロサービスを構成する）クラスタ化されたコンテナの短命な性質によりセキュアなサービスディスカバリが必要である。可用性の要件では、以下が求められる。(a)ロードバランシング、サーキットブレイキング、スロットリングのようなレジリエンス(回復力)の技術、(b)継続的な監視（サービス健全性のため）。サービスメッシュは、個々のマイクロサービスのコードに変更することなく効果的に実装されながら、一律かつ一貫性のある定義が可能な抽象レベルで、先の要件を容易に指定可能な最もよく知られたアプローチである。本ドキュメントの目的は、マイクロサービス型アプリケーションをサポートするための堅牢なセキュリティインフラを形成するプロキシベースのサービスメッシュコンポーネントの導入ガイダンスを提供することである。

## キーワード

APIゲートウェイ，アプリケーション プログラミング インタフェース(API)，サーキットブレイカー，ロードバランシング，マイクロサービス，サービスメッシュ，サービスプロキシ

## 注意 特許開示通知

情報技術研究所（ITL）は、この出版物のガイダンスまたは要件に準拠するために使用が必要となる可能性のある特許クレームの所有者に、特許クレームをITLへ開示することを要求している。ただし、特許の保有者は、ITLの特許請求に応答する義務はなく、ITLはこの出版物に適用される可能性のある特許を特定する調査を行っていない。出版日現在，また本書のガイダンスまたは要件に準拠するために使用が必要となる可能性のある特許クレームを特定するための募集を行った時点は、このような特許クレームはITLに確認されていない。 ITLは、この出版物の使用における特許侵害を回避するためにライセンスが必要でないことを表明または暗示するものではない。

## エグゼクティブサマリ

マイクロサービスベースのアプリケーション・アーキテクチャは、そのスケーラビリティ、デプロイの俊敏性、ツールの可用性の高さから、クラウドベースのアプリケーションや大規模なエンタープライズ・アプリケーションを構築する際の規範となりつつある。同時に、マイクロサービスベースのアプリケーションの特性は、セキュリティ要件の変更や強化をもたらす。

これら特性とそのセキュリティへの影響におけるいくつか例は次のとおりである。

1. マイクロサービスの数が膨大になると、相互接続が多くなり，保護すべき通信リンクも増加する
2. マイクロサービスの短命の性質は、安全なサービスディスカバリの仕組みを必要とする
3. 細分化されたマイクロサービスの性質は、きめ細かな認可ポリシーを必要とする

マイクロサービスベースのアプリケーションのためにサポートされるサービス（認証/認可，セキュリティ監視など）は，サービスメッシュのような専用のインフラを介してしっかりと調整されなければならない。サービスメッシュのコンポーネントをデプロイする方法は複数ある。アプリケーション（マイクロサービス）のコードに組み込む方法、ライブラリとして実装してアプリケーションのコードに結合する方法、アプリケーションコードから独立したサービスプロキシとして実装する方法などである。最後のデプロイ方法は、マイクロサービスベースのアプリケーションを支援するインフラを実装する多くのシナリオにおいて、スケーラビリティと柔軟性の点で最も効率的であることがわかっている。

本ドキュメントの目的は、サービスプロキシベースのアプローチにおけるサービスメッシュ・コンポーネントのデプロイガイダンスを提供することである。サービスメッシュのデプロイにおける推奨事項は以下の通りである

- サービスプロキシ間の通信設定
- イングレスプロキシの設定
- 外部サービスへのアクセス設定
- IDやアクセス管理の設定
- 監視機能の設定
- ネットワークレジリエンスの設定
- オリジン間リソース共有（CORS）の設定
- 管理者権限の設定

## 序論

マイクロサービスアーキテクチャはエンタープライズやクラウドベースのアプリケーションを構築するための確立されたアプローチになっている。これは次の理由からである:

- 俊敏性: マイクロサービス群の疎結合性とモジュール性の向上により，他のコンポーネント（マイクロサービス）に影響を与えることなく独立的に迅速な修正やデプロイが可能となる
- スケーラビリティ: マイクロサービスの特性により，個々のマイクロサービスを独立に拡張できる
- 利便性: 明確に定義されたAPIを使用し，様々はマイクロサービスの統合や受け入れが可能となる
- ツールの可用性: 自動化ツールの可用性の向上はエラーのない設定とデプロイを容易になる

上記の利点にもかかわらず，マイクロサービスベースのアプリケーションアーキテクチャにはセキュリティ要件の修正や強化を伴う以下の課題がある。

- マイクロサービスが多くなるに伴い，コンポーネント間の接続や保護すべき通信リンクが増加する
- コンポーネント（マイクロサービス）が動的に生成・削除されるため，セキュアなサービスディスカバリが必要となる
- ネットワークの境界線という概念がない
- すべてのマイクロサービスは信頼できないものとして扱わなければならない
- マイクロサービスのきめ細かな性質は、マイクロサービスごとの細かな認証を必要とする。そのためには、セキュリティポリシーを一元的に定義し、その設定を各マイクロサービスに反映することで、マイクロサービス全体に渡って統一的かつ一貫性のある運用を可能にする必要がある